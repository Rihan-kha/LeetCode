int subarraysDivByK(int* nums, int n, int k) {
    int count = 0;
    int prefix = 0;
    int* rem = (int*)calloc(k, sizeof(int));
    rem[0] = 1; 

    for (int i = 0; i < n; i++) {
        prefix += nums[i];
        int r = prefix % k;
        if (r < 0) r += k;

        count += rem[r];
        rem[r]++;
    }

    free(rem);
    return count;
}
